<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æ—¥æœŸæ˜¾ç¤º -->
  <view class="header">
    <text class="date-display">{{currentDate}}</text>
  </view>

  <!-- è¿‡æ»¤å™¨ -->
  <view class="filter">
    <text class="{{filter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-type="all">å…¨éƒ¨</text>
    <text class="{{filter === 'active' ? 'active' : ''}}" bindtap="setFilter" data-type="active">æœªå®Œæˆ</text>
    <text class="{{filter === 'completed' ? 'active' : ''}}" bindtap="setFilter" data-type="completed">å·²å®Œæˆ</text>
  </view>

  <!-- å¾…åŠåˆ—è¡¨ -->
  <view class="todo-list">
    <block wx:for="{{filteredTodos}}" wx:key="id">
      <view class="todo-item">
        <view class="todo-content" bindtap="goToDetail" data-id="{{item.id}}">
          <checkbox checked="{{item.completed}}" catchtap="toggleTodo" data-id="{{item.id}}" />
          <view class="todo-info">
            <text class="todo-text {{item.completed ? 'completed' : ''}}">{{item.text}}</text>
            <text class="todo-date" wx:if="{{item.dueDate}}">æˆªæ­¢: {{item.dueDate}}</text>
          </view>
        </view>
        <text class="delete-btn" bindtap="deleteTodo" data-id="{{item.id}}">ğŸ—‘ï¸</text>
      </view>
    </block>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="statistics">
    <text>æ€»è®¡: {{todos.length}} | å·²å®Œæˆ: {{completedCount}} | æœªå®Œæˆ: {{activeCount}}</text>
  </view>

  <!-- æ·»åŠ å¾…åŠåŒºåŸŸ -->
  <view class="input-area">
    <view class="input-row">
      <input class="todo-input" placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹" value="{{newTodo}}" bindinput="onInput" bindconfirm="addTodo"/>
      <button class="add-btn" bindtap="addTodo">æ·»åŠ </button>
    </view>
  </view>
</view>